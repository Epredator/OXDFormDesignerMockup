<html>
<head>
	<style>
		html, body { height: 100%; margin: 0; }
	</style>
	<script type="text/javascript">
	function showApplet() {
		var designerApplet = document.getElementById("designerApplet");
		var loading = document.getElementById("loading");

		if (designerApplet.isActive()) {
			clearInterval(timerId);
			loading.style.display = "none";
			designerApplet.style.visibility = "";
		}
	}
	</script>
</head>
<body>
<div id="loading">
	<img src="http://www.daviscommercialrealty.com/loading.gif" />
</div>
<script src="http://java.com/js/deployJava.js" type="text/javascript"></script>
<script type="text/javascript">
	var attributes = {
		code:"org.apache.pivot.wtk.BrowserApplicationContext$HostApplet",
		width:"100%",
		height:"100%",
		style:"visibility: hidden;"
	};

	attributes.id = "designerApplet";

	var libraries = [];
	libraries.push("./${project.artifactId}-${project.version}-jar-with-dependencies.jar");                

	attributes.archive = libraries.join(",");

	var parameters = {
		codebase_lookup:false,
		application_class_name:'${application.appclass}'
	};

	var javaArguments = ["-Dsun.awt.noerasebackground=true",
		"-Dsun.awt.erasebackgroundonresize=true"];

	parameters.java_arguments = javaArguments.join(" ");

	deployJava.runApplet(attributes, parameters, "1.6");

	var timerId = setInterval("showApplet()", 1000);
</script>
</body>
</html>
